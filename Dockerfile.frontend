FROM node:20-alpine

WORKDIR /app

# Copia package.json
COPY js/todolist/package*.json ./

RUN npm ci

# Copia código
COPY js/todolist/ .

# Build do React
RUN npm run build

# Instala serve globalmente
RUN npm install -g serve

# Usa a porta que o Cloud Run fornece
ENV PORT 8080

# Expose (Cloud Run ignora, mas é bom manter)
EXPOSE 8080

# Comando para rodar
CMD ["serve", "-s", "dist", "-l", "8080"]
